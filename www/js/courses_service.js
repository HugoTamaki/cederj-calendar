app.service("CoursesService",["DataService",function(e){function t(e){return e.map(function(e){return e.ap1_date&&(e.ap1_date=moment(e.ap1_date,"DD/MM/YYYY")),e.ap2_date&&(e.ap2_date=moment(e.ap2_date,"DD/MM/YYYY")),e.ap3_date&&(e.ap3_date=moment(e.ap3_date,"DD/MM/YYYY")),e})}return{courses:[],selectedCourse:null,term:"",init:function(){var t=e.locations,n=this;this.locations=t.map(function(e){return n.getCourses(e)}),this.locations=this.locations.filter(function(e){return e.courses.length>0}),this.locations.forEach(function(e){e.courses.map(function(e){return n.getDisciplines(e)}),e.courses=e.courses.filter(function(e){return e.disciplines.length>0})})},getCourses:function(t){var n=e.courses;return t.courses=n.filter(function(e){return e.location===t.name}),t},getDisciplines:function(n){var i=t(e.disciplines);return n.disciplines=i.filter(function(e){return e.course===n.name&&e.location===n.location}),n},getFilteredDisciplines:function(e){var t=this.term.split(" ").join("|"),n=new RegExp(t,"i");return _(e.disciplines).filter(function(e){return n.test(e.name)})}}}]);